<div class="container">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <h3 class="mb-4">Thêm bài học mới</h3>
            <form autocomplete="off" method="POST" action="/courses/{{course._id}}/sections/{{section._id}}/lessons">
                <!-- Lesson type selection -->
                <div class="mb-3">
                    <label class="form-label">Loại bài học</label>
                    <div class="d-flex gap-4">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" value="video" id="videoCheck" name="lessonType"
                                checked>
                            <label class="form-check-label" for="videoCheck">
                                <i class="bi bi-play-circle me-1"></i>Video
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" value="document" id="documentCheck"
                                name="lessonType">
                            <label class="form-check-label" for="documentCheck">
                                <i class="bi bi-file-earmark-text me-1"></i>Tài liệu
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" value="exercise" id="exerciseCheck"
                                name="lessonType">
                            <label class="form-check-label" for="exerciseCheck">
                                <i class="bi bi-pencil-square me-1"></i>Bài tập
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Title field -->
                <div class="mb-3">
                    <label for="lessonTitle" class="form-label">Tiêu đề</label>
                    <input type="text" class="form-control" id="lessonTitle" name="title" required>
                </div>

                <!-- Dynamic fields based on selection -->
                <div id="videoField" class="mb-3">
                    <label for="lessonVideo" class="form-label">Link Video</label>
                    <input type="text" class="form-control" id="lessonVideo" name="ytbVideoID">
                </div>

                <div id="documentField" class="mb-3 d-none">
                    <label for="lessonResource" class="form-label">Link Tài liệu</label>
                    <input type="text" class="form-control" id="lessonResource" name="docLink">
                </div>

                <div id="exerciseField" class="mb-3 d-none">
                    <label for="lessonExercise" class="form-label">Nội dung bài tập</label>
                    <textarea class="form-control" id="lessonExercise" name="content" rows="5"></textarea>
                </div>

                <div class="mt-4">
                    <button type="submit" class="btn btn-primary">Thêm bài học</button>
                    <a href="/{{course.slug}}/lessons" class="btn btn-secondary ms-2">Hủy</a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const lessonTypes = document.getElementsByName('lessonType');
        const videoField = document.getElementById('videoField');
        const documentField = document.getElementById('documentField');
        const exerciseField = document.getElementById('exerciseField');

        function toggleFields(selectedType) {
            videoField.classList.toggle('d-none', selectedType !== 'video');
            documentField.classList.toggle('d-none', selectedType !== 'document');
            exerciseField.classList.toggle('d-none', selectedType !== 'exercise');
        }

        lessonTypes.forEach(radio => {
            radio.addEventListener('change', function () {
                toggleFields(this.value);
            });
        });

        toggleFields('video');
    });
</script>